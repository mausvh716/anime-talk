<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anime Waifu Live AI</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #0f172a;
  color: #e5e7eb;
  margin: 0;
  padding: 0;
}
header {
  background: #1e293b;
  padding: 15px;
  text-align: center;
  color: #38bdf8;
  font-size: 1.8em;
  font-weight: bold;
}
.container {
  display: flex;
  flex-direction: row;
  max-width: 1000px;
  margin: 20px auto;
  gap: 20px;
}
.character-panel {
  flex: 1;
  background: #020617;
  padding: 20px;
  border-radius: 12px;
  text-align: center;
}
.character-panel img {
  width: 200px;
  border-radius: 12px;
  margin-bottom: 10px;
}
.chat-panel {
  flex: 2;
  display: flex;
  flex-direction: column;
  background: #020617;
  border-radius: 12px;
  padding: 20px;
  max-height: 600px;
}
.chat-window {
  flex: 1;
  overflow-y: auto;
  padding: 10px;
  border-bottom: 1px solid #334155;
}
.chat-input {
  display: flex;
  margin-top: 10px;
}
.chat-input input {
  flex: 1;
  padding: 10px;
  border-radius: 8px 0 0 8px;
  border: none;
  background: #1e293b;
  color: white;
}
.chat-input button {
  padding: 10px 20px;
  border-radius: 0 8px 8px 0;
  border: none;
  background: #38bdf8;
  color: black;
  font-weight: bold;
  cursor: pointer;
}
.message {
  margin: 5px 0;
  padding: 8px 12px;
  border-radius: 12px;
  max-width: 70%;
  clear: both;
}
.user { background: #38bdf8; color: black; float: right; text-align: right; }
.ai { background: #22c55e; color: black; float: left; text-align: left; }
.affection {
  margin-top: 10px;
  font-weight: bold;
}
</style>
</head>
<body>
<header>Anime Waifu Live AI</header>
<div class="container">
  <div class="character-panel">
    <h2>Choose Character</h2>
    <img id="characterImg" src="https://media.giphy.com/media/3o7abB06u9bNzA8lu8/giphy.gif" alt="Character">
    <div>
      <button onclick="selectCharacter('Sakura')">Sakura</button>
      <button onclick="selectCharacter('Asuna')">Asuna</button>
      <button onclick="selectCharacter('Mikasa')">Mikasa</button>
    </div>
    <div class="affection" id="affection">Affection: 50</div>
  </div>
  <div class="chat-panel">
    <div class="chat-window" id="chatWindow"></div>
    <div class="chat-input">
      <input type="text" id="userInput" placeholder="Type your message...">
      <button id="sendBtn">Send</button>
    </div>
  </div>
</div>
<script>
let selectedCharacter = '';
let affection = 50;

function selectCharacter(name) {
  selectedCharacter = name;
  const img = document.getElementById('characterImg');
  if(name==='Sakura') img.src='https://media.giphy.com/media/3o7abB06u9bNzA8lu8/giphy.gif';
  if(name==='Asuna') img.src='https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif';
  if(name==='Mikasa') img.src='https://media.giphy.com/media/xT0GqFvKk8Q9fX9kWo/giphy.gif';
}

const chatWindow=document.getElementById('chatWindow');
const userInput=document.getElementById('userInput');
const sendBtn=document.getElementById('sendBtn');
const affectionEl=document.getElementById('affection');

sendBtn.addEventListener('click',async()=>{
  const message=userInput.value.trim();
  if(!message||!selectedCharacter)return alert('Select a character and type a message!');

  const userMsg=document.createElement('div');
  userMsg.classList.add('message','user');
  userMsg.textContent=message;
  chatWindow.appendChild(userMsg);
  userInput.value='';
  chatWindow.scrollTop=chatWindow.scrollHeight;

  const aiMsg=document.createElement('div');
  aiMsg.classList.add('message','ai');
  aiMsg.textContent=`${selectedCharacter} is thinking...`;
  chatWindow.appendChild(aiMsg);
  chatWindow.scrollTop=chatWindow.scrollHeight;

  try{
    const response=await fetch('https://api.openai.com/v1/chat/completions',{
      method:'POST',
      headers:{
        'Content-Type':'application/json',
        'Authorization':'Bearer YOUR_OPENAI_API_KEY'
      },
      body:JSON.stringify({
        model:'gpt-3.5-turbo',
        messages:[
          {role:'system',content:`${selectedCharacter} is a fun anime girl who dances, flirts, roasts, and shows emotions.`},
          {role:'user',content:message}
        ]
      })
    });
    const data=await response.json();
    const aiText=data.choices[0].message.content||'No response';
    aiMsg.textContent=aiText;

    if(aiText.toLowerCase().includes('love')||aiText.toLowerCase().includes('like'))affection+=5;
    if(aiText.toLowerCase().includes('hate')||aiText.toLowerCase().includes('annoy'))affection-=5;
    if(affection>100)affection=100;
    if(affection<0)affection=0;
    affectionEl.textContent=`Affection: ${affection}`;
    chatWindow.scrollTop=chatWindow.scrollHeight;
  }catch(err){
    aiMsg.textContent='Error generating response';
  }
});
</script>
</body>
</html>
